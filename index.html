<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Confirme sua presen√ßa ‚Äî Sofia 15 anos</title>
  <style>
    :root{
      --bg:#fff5f8;
      --rose:#f7d6e1;
      --wine:#8b1f3f;
      --muted:#8b4358;
      --card:#fff;
      font-family: "Poppins", "Segoe UI", Arial, sans-serif;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#fff);color:var(--muted);-webkit-font-smoothing:antialiased}
    .container{max-width:920px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;gap:18px;margin-bottom:18px}
    .logo{width:88px;height:88px;border-radius:999px;background:radial-gradient(circle at 25% 25%, #fff,#ffdfe9);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(139,31,63,.06)}
    .logo h1{font-family:"Brush Script MT",cursive;margin:0;color:var(--wine);font-size:26px}
    h1.page-title{font-size:30px;margin:0;color:var(--wine)}
    p.subtitle{margin:6px 0 0;color:rgba(90,16,48,.75)}
    .phrases{background:#fff;border-radius:12px;padding:18px;margin:20px 0;box-shadow:0 8px 24px rgba(139,31,63,.04);font-style:italic;color:var(--muted)}
    .card{background:linear-gradient(180deg,#fff,#fff7fb);border-radius:14px;padding:28px;box-shadow:0 12px 40px rgba(139,31,63,.06);text-align:center}
    .date-row{display:flex;justify-content:center;gap:24px;align-items:center;margin:18px 0}
    .date-circle{width:84px;height:84px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:6px solid rgba(139,31,63,.06);font-weight:700;color:var(--wine);font-size:28px}
    .address{margin-top:8px;color:rgba(90,16,48,.85);font-size:15px}
    .heart{width:58px;height:58px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:18px auto;background:linear-gradient(180deg,var(--wine),#6f1538);color:#fff;box-shadow:0 8px 18px rgba(139,31,63,.12)}
    .form-row{margin-top:14px;display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
    input[type=text]{padding:12px 14px;border-radius:8px;border:2px solid rgba(139,31,63,.08);min-width:280px;font-size:15px}
    button{background:var(--wine);color:#fff;border:none;padding:12px 16px;border-radius:8px;cursor:pointer;font-weight:600}
    .small{font-size:13px;color:rgba(90,16,48,.65)}
    .admin-link{display:block;margin-top:12px;text-decoration:underline;color:var(--wine)}
    footer{font-size:13px;color:rgba(90,16,48,.6);text-align:center;margin-top:28px}
    /* simple fade-in */
    .fade-in{animation:fadeIn .8s ease both}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
    /* WhatsApp */
    .whatsapp{display:inline-block;margin-top:12px;background:#25D366;color:#fff;padding:10px 16px;border-radius:9px;text-decoration:none}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden="true"><h1>Sofia</h1></div>
      <div>
        <h1 class="page-title">Confirme sua presen√ßa ‚Äî 15 anos</h1>
        <p class="subtitle">S√°bado ¬∑ 22 de Novembro de 2025 ¬∑ 19:00h</p>
      </div>
    </header>

    <div class="phrases fade-in" id="phrases">
      <p>√â muito mais do que a passagem do tempo:</p>
      <p>... uma adolesc√™ncia que chega ... uma festa, um brinde, e mais do que um dia! S√£o 15 Anos de vida. Voc√™ faz parte dela!</p>
      <p>O palco √© s√≥ uma noite, mas os bons momentos viver√£o nesta noite inesquec√≠vel.</p>
    </div>

    <div class="card fade-in" role="region" aria-label="Convite">
      <div style="font-size:20px;font-weight:600;color:var(--wine)">Sofia</div>
      <div style="font-size:15px;color:rgba(90,16,48,.8)">15 anos</div>

      <div class="date-row" aria-hidden="true">
        <div style="text-align:center">
          <div class="small">S√ÅBADO</div>
          <div class="small">19:00H</div>
        </div>
        <div class="date-circle">22</div>
        <div style="text-align:center">
          <div class="small">NOVEMBRO</div>
          <div class="small">2025</div>
        </div>
      </div>

      <div class="address">Rod. Tancredo Neves, 3116 ‚Äì Volta Redonda<br><strong>Espa√ßo Fred do Corisco ‚Äì Rodovia dos Metal√∫rgicos</strong></div>

      <div class="heart" aria-hidden="true">‚ù§</div>

      <div style="max-width:760px;margin:0 auto">
        <div class="form-row">
          <input id="nome" type="text" placeholder="Digite seu nome completo" aria-label="Digite seu nome completo" />
          <button id="btnConfirm">Confirmar presen√ßa</button>
        </div>

        <div id="msgArea" style="margin-top:12px;text-align:center" class="small"></div>

        <a id="whatsappShare" class="whatsapp" href="#" target="_blank" rel="noopener">üí¨ Compartilhar no WhatsApp</a>

        <a class="admin-link" href="admin.html">√Årea do organizador (acesso s√≥ seu)</a>
      </div>
    </div>

    <footer>Obrigado ‚Äî esperamos voc√™ para celebrar com a Sofia!</footer>
  </div>

  <!-- Firebase modular SDK (v11) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";

    // === SUA CONFIG AQUI ===
    const firebaseConfig = {
      apiKey: "AIzaSyDmNGSKt_f_R0wIeTnS-51hVvGIXe_pjTw",
      authDomain: "sofia-15-anos-37213.firebaseapp.com",
      projectId: "sofia-15-anos-37213",
      storageBucket: "sofia-15-anos-37213.firebasestorage.app",
      messagingSenderId: "793990977775",
      appId: "1:793990977775:web:a96dcbca03fb0fa466231a"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // REFER√äNCIA: cole√ß√£o onde os nomes ser√£o guardados
    const rsvpsCol = collection(db, "confirmacoes");

    const btn = document.getElementById("btnConfirm");
    const msgArea = document.getElementById("msgArea");

    btn.addEventListener("click", async () => {
      const nomeEl = document.getElementById("nome");
      const nome = nomeEl.value.trim();
      if (!nome) {
        msgArea.style.color = "crimson";
        msgArea.textContent = "Por favor, digite seu nome completo.";
        return;
      }

      btn.disabled = true;
      btn.textContent = "Confirmando...";

      try {
        await addDoc(rsvpsCol, {
          nome: nome,
          confirmadoEm: serverTimestamp()
        });
        msgArea.style.color = "green";
        msgArea.textContent = `Presen√ßa confirmada! Obrigado, ${nome} üíñ`;
        nomeEl.value = "";
      } catch (e) {
        console.error(e);
        msgArea.style.color = "crimson";
        msgArea.textContent = "Erro ao confirmar. Tente novamente.";
      } finally {
        btn.disabled = false;
        btn.textContent = "Confirmar presen√ßa";
      }
    });

    // Bot√£o WhatsApp ‚Äî substitua pela URL final do seu site
    const shareLink = "https://seu-usuario.github.io/sofia15anos/"; // <-- troque depois pelo link real
    const shareText = encodeURIComponent("Acabei de confirmar presen√ßa no anivers√°rio da Sofia! üéâüíñ " + shareLink);
    const wa = document.getElementById("whatsappShare");
    wa.href = `https://wa.me/?text=${shareText}`;
  </script>
</body>
</html>
